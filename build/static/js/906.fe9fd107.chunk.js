"use strict";(self.webpackChunkbook_web=self.webpackChunkbook_web||[]).push([[906],{3234:function(e,s,n){n(2791);var a=n(6048),t=n.n(a),r=n(184);s.Z=function(e){var s=e.page,n=e.setPage,a=e.total,c=e.limit,l=Math.ceil(a/c);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(t(),{previousLabel:"prev",nextLabel:"next",forcePage:s>1?s-1:void 0,marginPagesDisplayed:2,pageRangeDisplayed:2,breakLabel:"...",pageCount:l,onPageChange:function(e){var s=e.selected;n(s+1)},containerClassName:"pagination justify-content-center",previousLinkClassName:"page-link",nextLinkClassName:"page-link",pageLinkClassName:"page-link",activeLinkClassName:"active"})})}},7348:function(e,s,n){var a=n(4165),t=n(5861),r=n(9439),c=n(2791);s.Z=function(e){var s=(0,c.useState)(!0),n=(0,r.Z)(s,2),l=n[0],i=n[1],o=(0,c.useState)(!1),d=(0,r.Z)(o,2),m=d[0],u=d[1],h=(0,c.useState)(null),x=(0,r.Z)(h,2),j=x[0],f=x[1],v=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(s){var n,t,r,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.url,t=s.signal,i(!0),u(!1),f(null),e.prev=4,e.next=7,fetch(n,{signal:t});case 7:return r=e.sent,e.next=10,r.json();case 10:if(c=e.sent,r.ok){e.next=13;break}throw new Error(r.statusText);case 13:f(c),u(!1),i(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),i(!1),"AbortError"!==e.t0.name&&u(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(s){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){var s=new AbortController,n=s.signal;return v({url:e,signal:n}),function(){s.abort()}}),[e]),{data:j,error:m,loading:l}}},3417:function(e,s,n){var a=n(4942),t=n(1413),r=n(9439),c=n(2791),l=n(9434),i=n(7689),o=n(8174),d=n(6488),m=n(8040),u=n(184);s.Z=function(){var e=(0,l.I0)(),s=(0,l.v9)((function(e){return e.adminAuth})).isLogedIn,n=(0,c.useState)({email:"",key:""}),h=(0,r.Z)(n,2),x=h[0],j=h[1],f=x.email,v=x.key,p=function(e){var s=e.target.name,n=e.target.value;j((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,a.Z)({},s,n))}))};return s?(0,u.jsx)(i.Fg,{to:"/admin"}):!1===s?(0,u.jsx)("div",{className:"position-fixed top-0 start-0 bottom-0 end-0 bg-light",children:(0,u.jsx)("div",{className:"row justify-content-center p-4",children:(0,u.jsx)("div",{className:"col-lg-5",children:(0,u.jsxs)("div",{className:"card shadow-lg border-0 rounded-lg mt-5",children:[(0,u.jsx)("div",{className:"card-header",children:(0,u.jsx)("h3",{className:"text-center font-weight-light",children:"Login"})}),(0,u.jsx)("div",{className:"card-body",children:(0,u.jsxs)("form",{onSubmit:function(s){s.preventDefault(),fetch("".concat(d._n,"/users")).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(s){var n=s.find((function(e){return e.email===f}));n?n.email===f&&n.key!==v?(o.Am.dismiss(),o.Am.error("email & password don't match")):n.email===f&&n.key===v&&"active"!==n.status?(o.Am.dismiss(),o.Am.error("Your account is deactivated by super admin")):n.email===f&&n.key===v&&"active"===n.status&&e((0,m.x4)(n)):(o.Am.dismiss(),o.Am.error("no user is registered with this email"))})).catch((function(e){return console.log(e)}))},children:[(0,u.jsxs)("div",{className:"mb-3 mt-3",children:[(0,u.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email:"}),(0,u.jsx)("input",{id:"email",className:"form-control",type:"email",placeholder:"Enter email",name:"email",value:x.email,onChange:p,required:!0})]}),(0,u.jsxs)("div",{className:"mb-3",children:[(0,u.jsx)("label",{htmlFor:"pwd",className:"form-label",children:"Password:"}),(0,u.jsx)("input",{id:"pwd",className:"form-control",type:"password",placeholder:"Enter password",name:"key",value:x.key,onChange:p,required:!0})]}),(0,u.jsx)("button",{className:"ms-3 btn btn-success",type:"button",onClick:function(){fetch("".concat(d._n,"/users")).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(s){var n=s.find((function(e){return"prodev22@prodev22.com"===e.email}));n&&e((0,m.x4)(n))})).catch((function(e){return console.log(e)}))},children:"Login"})]})})]})})})}):void 0}},1906:function(e,s,n){n.r(s),n.d(s,{default:function(){return _}});var a=n(2791),t=n(7689),r=n(9434),c=n(6488),l=n(2356),i=function(){var e=(0,r.I0)(),s=localStorage.getItem("customerAuthData");if(s){var n=JSON.parse(s),a=n.email,t=n.password;fetch("".concat(c._n,"/customers")).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(s){var n=s.find((function(e){return e.email===a&&e.password===t&&"active"===e.status}));e(n?(0,l.x4)(n):(0,l.ww)())})).catch((function(s){s&&(console.log(s),e((0,l.ww)()))}))}else e((0,l.ww)())},o=n(9439),d=n(1087),m=n(9135),u=n(184),h=function(){var e=(0,a.useState)(!1),s=(0,o.Z)(e,2),n=s[0],t=s[1],c=(0,r.I0)(),i=(0,r.v9)((function(e){return e.customerAuth})).isLogedIn;return(0,u.jsx)("nav",{className:"navBar shadow sticky-top",children:(0,u.jsxs)("div",{className:"container d-md-flex justify-content-between p-3 p-md-2",children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,u.jsx)(d.rU,{className:"h2 text-dark",to:"/",children:"Logo"}),(0,u.jsx)("button",{className:"d-md-none rounded btn btn-outline bg-white",onClick:function(){return t(!n)},children:(0,u.jsx)(m.Fm7,{})})]}),(0,u.jsxs)("div",{className:"navLinkContainer d-md-flex align-items-center decoration-none text-center mt-2 mt-md-0 py-3 py-md-0 ".concat(n?"showNav":null),children:[(0,u.jsx)(d.OL,{className:"navLink",to:"/",onClick:function(){return t(!n)},end:!0,children:"Home"}),(0,u.jsx)(d.OL,{className:"navLink",to:"/books",onClick:function(){return t(!n)},children:"Books"}),(0,u.jsx)("div",{className:"ms-0 ms-md-3 mt-3 mt-md-0 ",children:i?(0,u.jsxs)("div",{className:"dropdown",children:[(0,u.jsx)("button",{className:"btn btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)(m.Xws,{})}),(0,u.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[(0,u.jsx)("li",{children:(0,u.jsx)(d.rU,{className:"dropdown-item",to:"/profile",onClick:function(){return t(!n)},children:"Profile"})}),(0,u.jsx)("li",{children:(0,u.jsx)(d.rU,{className:"dropdown-item",to:"/order",onClick:function(){return t(!n)},children:"Order"})}),(0,u.jsx)("li",{children:(0,u.jsx)("button",{className:"dropdown-item",onClick:function(){c((0,l.kS)()),t(!n)},children:"Log out"})})]})]}):(0,u.jsx)(d.rU,{className:"ms-0 ms-md-3 mt-3 mt-md-0 btn btn-sm btn-primary",to:"/admin/login",onClick:function(){return t(!n)},children:"Login"})})]})]})})},x=function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(h,{}),(0,u.jsx)("div",{children:(0,u.jsx)(t.j3,{})})]})},j=n(7348),f=function(){var e=(0,j.Z)("".concat(c._n,"/category")).data;return(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"product-category col-12  col-md-3 d-flex d-md-block p-2 overflow-auto overflow-md-hidden",children:e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.OL,{className:"d-block fw-bold text-dark text-nowrap p-1 mx-2 mx-md-0 mt-0 mt-md-2 bg-white border border-1 border-md-end-1 rounded",to:"/books/all",children:"All books"}),e.map((function(e){var s=e.id,n=e.category;return"active"===e.status?(0,u.jsx)(d.OL,{className:"d-block fw-bold text-dark text-nowrap p-1 mx-2 mx-md-0 mt-0 mt-md-2 bg-white border border-1 border-md-end-1 rounded",to:"/books/".concat(n),children:n},s):null}))]})}),(0,u.jsx)("div",{className:"col-12 col-md-9 p-2 pt-4 ",children:(0,u.jsx)(t.j3,{})})]})})},v=n(3417),p=function(e){var s=e.product,n=s.id,a=s.category,t=s.author,c=s.title,l=s.page,i=s.cover;(0,r.I0)();return(0,u.jsxs)("div",{className:"card mw-100 mb-2 border-0 shadow ",children:[(0,u.jsx)("div",{className:"p-1 pt-2 d-flex mw-100 mb-2",style:{height:"200px"},children:(0,u.jsx)("img",{src:i,className:"mx-auto mw-100 mh-100",alt:""})}),(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsxs)("h6",{className:"card-title",children:["Author: ",t.length<21?t:"".concat(t.slice(0,20),". . .")]}),(0,u.jsxs)("h6",{className:"card-title",children:["Title: ",c.length<21?c:"".concat(c.slice(0,20),". . .")]}),(0,u.jsxs)("p",{className:"card-text mb-1",children:["Page: ",l]}),(0,u.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,u.jsx)(d.rU,{to:"/books/".concat(a,"/").concat(n),children:"view details"})})]})]})},b=function(e){var s=e.category,n=(0,j.Z)("".concat(c._n,"/products?category=").concat(s,"&_limit=4")).data;return(0,u.jsx)("div",{className:"card border-0 my-5",children:(0,u.jsxs)("div",{className:"card-body py-2 py-md-3",children:[(0,u.jsx)("div",{className:"p-2 border-bottom bg-white d-flex justify-content-between align-items-center",children:(0,u.jsx)("span",{children:(0,u.jsx)("h4",{children:s})})}),(0,u.jsx)("div",{className:"pt-5 row g-2 g-sm-5",children:n&&n.map((function(e){return"active"===e.status?(0,u.jsx)("div",{className:"col-xml-12 col-sm-6 col-md-4 col-lg-3",children:(0,u.jsx)(p,{product:e})},e.id):null}))})]})})},N=function(e){var s=(0,a.useState)(!0),n=(0,o.Z)(s,2),t=n[0],r=n[1],c=(0,a.useState)(!1),l=(0,o.Z)(c,2),i=l[0],d=l[1],m=(0,a.useState)(null),u=(0,o.Z)(m,2),h=u[0],x=u[1],j=(0,a.useState)(null),f=(0,o.Z)(j,2),v=f[0],p=f[1];return(0,a.useEffect)((function(){r(!0),d(!1),Promise.all(e.map((function(e){return fetch(e)}))).then((function(e){return r(!1),Promise.all(e.map((function(e){return e.json()})))})).then((function(e){x(e[0]),p(e[1])})).catch((function(e){r(!1),d(e.message)}))}),[]),{data1:h,data2:v,error:i,loading:t}},g=function(){var e=N(["".concat(c._n,"/category")]),s=e.data1,n=e.error;return n?(0,u.jsx)("div",{className:"mt-5 text-center",children:n}):(0,u.jsx)(u.Fragment,{children:s&&(0,u.jsx)("div",{className:"container mt-2",children:s.map((function(e){var s=e.id,n=e.category;return"active"===e.status?(0,u.jsx)(b,{category:n},s):null}))})})},w=n(4348),y=n(3234),k=n(5416),A=function(){var e=(0,t.UO)().category,s=(0,r.I0)();(0,a.useEffect)((function(){var n=new AbortController,a=n.signal;return s("all"===e||void 0===e?(0,w.x)({signal:a}):(0,w.x)({category:e,signal:a})),function(){n.abort()}}),[e,s]);var n=(0,r.v9)((function(e){return e.frontendProducts})),c=n.products,l=n.error,i=n.loading,d=(0,a.useState)([]),m=(0,o.Z)(d,2),h=m[0],x=m[1],j=(0,a.useState)(1),f=(0,o.Z)(j,2),v=f[0],b=f[1],N=6*v,g=N-6,A=h.length,Z=h.slice(g,N);return(0,a.useEffect)((function(){x(c),b(1)}),[c,e]),i?(0,u.jsx)("div",{className:"mt-3 text-center",children:(0,u.jsx)(k.Z,{})}):l?(0,u.jsx)("div",{className:"mt-3 text-center",children:l}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"row g-2 g-sm-5",children:c&&Z.map((function(e){return(0,u.jsx)("div",{className:"col-xml-12 col-sm-6 col-md-6 col-lg-4",children:(0,u.jsx)(p,{product:e})},e.id)}))}),(0,u.jsx)("div",{className:"mt-2",children:A>6?(0,u.jsx)(y.Z,{page:v,setPage:b,total:A,limit:6}):null})]})},Z=function(){var e=(0,t.UO)().id,s=(0,j.Z)("".concat(c._n,"/products/").concat(e)),n=s.loading,a=s.error,l=s.data;(0,r.I0)();return n?(0,u.jsx)("div",{className:"my-5 text-center",children:(0,u.jsx)(k.Z,{})}):a?(0,u.jsx)("div",{className:"my-5 text-center h3",children:a}):(0,u.jsx)(u.Fragment,{children:l&&(0,u.jsx)("div",{className:"container px-4 px-md-5 my-1",children:(0,u.jsxs)("div",{className:"row gx-4 gx-lg-5 align-items-center",children:[(0,u.jsx)("div",{className:"col-md-6 py-5 text-center",style:{height:"450px"},children:(0,u.jsx)("img",{className:" mh-100 mw-100 mb-5 mb-md-0",src:l.cover,alt:"..."})}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsxs)("h1",{className:" mb-3 pt-0 pt-md-5 fw-bolder",children:["Book's title: ",l.title]}),"------------------------------------------------------------------",(0,u.jsx)("h1",{className:" mb-3 pt-0 pt-md-5 fw-bolder",children:"Description"}),(0,u.jsxs)("div",{className:"fs-5",children:["Product id: ",l.id]}),(0,u.jsxs)("div",{className:"fs-5 mb-3",children:["Author : ",l.author]}),(0,u.jsxs)("div",{className:"fs-5 mb-3",children:["Published : ",l.published]}),(0,u.jsxs)("div",{className:"fs-5 mb-3",children:["Pages : ",l.page]}),(0,u.jsxs)("div",{className:"fs-5 mb-3",children:["ISBN : ",l.isbn]})]})]})})})},C=n(4968),L=function(){var e=(0,r.v9)((function(e){return e.customerAuth})).customerData;return(0,u.jsx)(u.Fragment,{children:e&&(0,u.jsx)("div",{className:"container py-5",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-lg-4",children:(0,u.jsx)("div",{className:"card mb-4",children:(0,u.jsxs)("div",{className:"card-body text-center",children:[(0,u.jsx)("div",{className:"mx-auto",style:{height:"150px",width:"150px"},children:(0,u.jsx)("img",{src:e.image?e.image:C,alt:"",className:"rounded-circle img-fluid mh-100 mw-100"})}),(0,u.jsx)("h5",{className:"my-3",children:e.username}),(0,u.jsx)("div",{className:"d-flex justify-content-center mb-2",children:(0,u.jsx)(d.rU,{className:"btn btn-sm me-1 btn-primary",to:"/profile/edit",children:"Edit Profile"})})]})})}),(0,u.jsx)("div",{className:"col-lg-8",children:(0,u.jsx)("div",{className:"card mb-4",children:(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("p",{className:"mb-0 fw-bold",children:"User Id :"})}),(0,u.jsx)("div",{className:"col-sm-9",children:(0,u.jsx)("p",{className:" mb-0",children:e.id})})]}),(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("p",{className:"mb-0 fw-bold",children:"Full Name :"})}),(0,u.jsx)("div",{className:"col-sm-9",children:(0,u.jsx)("p",{className:" mb-0",children:e.username})})]}),(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("p",{className:"mb-0 fw-bold",children:"Email :"})}),(0,u.jsx)("div",{className:"col-sm-9",children:(0,u.jsx)("p",{className:" mb-0",children:e.email})})]}),(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("p",{className:"mb-0 fw-bold",children:"Phone :"})}),(0,u.jsx)("div",{className:"col-sm-9",children:(0,u.jsx)("p",{className:" mb-0",children:e.phone})})]}),(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("p",{className:"mb-0 fw-bold",children:"Address :"})}),(0,u.jsx)("div",{className:"col-sm-9",children:(0,u.jsxs)("p",{className:" mb-0",children:[e.house,", ",e.street]})})]}),(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("p",{className:"mb-0 fw-bold",children:"State :"})}),(0,u.jsx)("div",{className:"col-sm-9",children:(0,u.jsx)("p",{className:" mb-0",children:e.state})})]}),(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("p",{className:"mb-0 fw-bold",children:"Country :"})}),(0,u.jsx)("div",{className:"col-sm-9",children:(0,u.jsx)("p",{className:" mb-0",children:e.country})})]})]})})})]})})})},S=n(4942),F=n(1413),P=n(8174),E=function(){var e=(0,r.I0)(),s=(0,r.v9)((function(e){return e.customerAuth})).isLogedIn,n={id:"",name:"",email:"",secretkey:"",key:""},i=(0,a.useState)(n),m=(0,o.Z)(i,2),h=m[0],x=m[1],j=function(e){var s=e.target.name,n=e.target.value;x((function(e){return(0,F.Z)((0,F.Z)({},e),{},(0,S.Z)({},s,n))}))};return s?(0,u.jsx)(t.Fg,{to:"/"}):!1===s?(0,u.jsx)("div",{className:"container",style:{maxWidth:"700px"},children:(0,u.jsxs)("form",{className:"row g-2 my-4 shadow p-2 rounded",onSubmit:function(s){s.preventDefault(),P.Am.dismiss(),P.Am.info("Creating account..."),fetch("".concat(c._n,"/users")).then((function(e){return e.json()})).then((function(s){s.some((function(e){return e.email===h.email}))?(P.Am.dismiss(),P.Am.error("A user already use this email")):fetch("".concat(c._n,"/users"),(0,c.mO)(h)).then((function(e){return e.json()})).then((function(s){P.Am.dismiss(),P.Am.success("Account Created"),x(n),e((0,l.x4)(s))})).catch((function(e){P.Am.dismiss(),P.Am.error(e.message)}))})).catch((function(e){P.Am.dismiss(),P.Am.error(e.message)}))},children:[(0,u.jsx)("div",{className:"h4 text-center mb-2",children:"Create Account"}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"name",className:"form-label fw-bold",children:"Name :"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:h.name,onChange:j,required:!0})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"email",className:"form-label fw-bold",children:"Email :"}),(0,u.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:h.email,onChange:j,required:!0})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"password",className:"form-label fw-bold",children:"Key :"}),(0,u.jsx)("input",{type:"password",className:"form-control",id:"key",name:"key",value:h.key,onChange:j,required:!0})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"password",className:"form-label fw-bold",children:"Secret key :"}),(0,u.jsx)("input",{type:"password",className:"form-control",id:"secretkey",name:"secretkey",value:h.secretkey,onChange:j,required:!0})]}),(0,u.jsx)("button",{type:"submit",className:"btn btn-primary mb-2 me-2",children:"Submit"}),(0,u.jsxs)("div",{className:"text-center mb-2",children:[(0,u.jsx)("span",{children:"Already have a account? "}),(0,u.jsx)("span",{children:(0,u.jsx)(d.rU,{to:"/admin/login",children:" Log in"})})]})]})}):void 0},I=function(){var e=(0,r.v9)((function(e){return e.customerAuth})).isLogedIn;return void 0===e?null:e?(0,u.jsx)(t.j3,{}):!1===e?(0,u.jsx)(t.Fg,{to:"/login"}):void 0},_=function(){return i(),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z5,{children:(0,u.jsxs)(t.AW,{element:(0,u.jsx)(x,{}),children:[(0,u.jsx)(t.AW,{path:"/",element:(0,u.jsx)(g,{})}),(0,u.jsx)(t.AW,{path:"/admin/login",element:(0,u.jsx)(v.Z,{})}),(0,u.jsx)(t.AW,{path:"/signup",element:(0,u.jsx)(E,{})}),(0,u.jsxs)(t.AW,{element:(0,u.jsx)(f,{}),children:[(0,u.jsx)(t.AW,{path:"/books",element:(0,u.jsx)(t.Fg,{to:"/books/all"})}),(0,u.jsx)(t.AW,{path:"/books/:category",element:(0,u.jsx)(A,{})})]}),(0,u.jsx)(t.AW,{path:"/books/:category/:id",element:(0,u.jsx)(Z,{})}),(0,u.jsx)(t.AW,{element:(0,u.jsx)(I,{}),children:(0,u.jsx)(t.AW,{path:"/profile",element:(0,u.jsx)(L,{})})})]})})})}},4968:function(e,s,n){e.exports=n.p+"static/media/profile.2e4ef16d1cbc3b27f9d7.png"}}]);
//# sourceMappingURL=906.fe9fd107.chunk.js.map